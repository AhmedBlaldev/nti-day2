<div class="container mt-4" *ngIf="product">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/home">Home</a></li>
      <li class="breadcrumb-item"><a routerLink="/products">Products</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ product.productName }}</li>
    </ol>
  </nav>

  <div class="row">
    <div class="col-md-6">
      <div class="product-image-container">
        <img
          [src]="product.productImgUrl"
          [alt]="product.productName"
          class="img-fluid rounded shadow-lg product-image"
        />
      </div>
    </div>

    <div class="col-md-6">
      <div class="product-info">
        <h1 class="product-title">{{ product.productName }}</h1>

        <div class="price-section mb-4">
          <h2 class="price">{{ product.productPrice | currency : 'EGP' }}</h2>
        </div>

        <div class="stock-section mb-4">
          <div
            class="alert"
            [ngClass]="{
              'alert-success': product.productQuantity > 2,
              'alert-warning': product.productQuantity === 2,
              'alert-danger': product.productQuantity === 1,
              'alert-secondary': product.productQuantity === 0
            }"
          >
            @switch (product.productQuantity) { @case (0) {
            <i class="fas fa-times-circle"></i> Out of Stock } @case (1) {
            <i class="fas fa-exclamation-triangle"></i> Last item remaining! } @case (2) {
            <i class="fas fa-exclamation-circle"></i> Last two items remaining! } @default {
            <i class="fas fa-check-circle"></i> In Stock ({{ product.productQuantity }} items) } }
          </div>
        </div>

        <div class="description-section mb-4">
          <h4>Product Description</h4>
          <p class="product-description">{{ product.productDetails }}</p>
        </div>

        <div class="action-buttons">
          <button
            class="btn btn-lg me-2 mb-2"
            [ngClass]="{
              'btn-primary': product.productQuantity > 2,
              'btn-warning': product.productQuantity === 2,
              'btn-danger': product.productQuantity === 1
            }"
            (click)="buy(product)"
            [disabled]="product.productQuantity === 0"
          >
            <i class="fas fa-shopping-cart"></i>
            @if (product.productQuantity === 0) { Out of Stock } @else { Add to Cart -
            {{ product.productPrice | currency : 'EGP' }}
            }
          </button>

          <button class="btn btn-outline-secondary btn-lg mb-2" (click)="goBack()">
            <i class="fas fa-arrow-left"></i> Back to Products
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h4>Additional Information</h4>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <h6><i class="fas fa-truck"></i> Delivery</h6>
              <p>Free delivery to all areas of Cairo and Alexandria</p>
            </div>
            <div class="col-md-4">
              <h6><i class="fas fa-shield-alt"></i> Warranty</h6>
              <p>Official warranty for one full year</p>
            </div>
            <div class="col-md-4">
              <h6><i class="fas fa-undo"></i> Returns</h6>
              <p>Return within 14 days</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4 text-center" *ngIf="!product">
  <div class="alert alert-danger">
    <h4>Product Not Found</h4>
    <p>Sorry, we couldn't find the requested product</p>
    <button class="btn btn-primary" routerLink="/products">Back to Products</button>
  </div>
</div>
